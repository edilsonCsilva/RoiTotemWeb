var localStorger=new LocalStorger,token=localStorger.getToObject("token"),campaign=localStorger.getToObject("campaign"),modal=$("#msn"),boxProcess=$("#box-process"),waitingTime=new Date;function getBoxProcess(e,o){o?e.html(' <div   class="box-process" ><div class="box-process item">Buscando Endere√ßo...</div> </div>'):e.html("")}null!=token&&0!=token.data.length&&null!=campaign||(location.href="/"),$(document).ready(function(){setTimeout(function(){},6e4),$("#input_address").focus(function(){this.value="",$("#input_zipcode").click(),$("#input_zipcode").focus()}),$("#input_zipcode").change(function(){$(this).keyup()}),$("#input_zipcode").keyup(function(){var e,o,t;waitingTime=new Date,getBoxProcess(boxProcess,!0),setTimeout((e=$("#input_zipcode"),o=$(e).val(),t=Api(),e={headers:{Authorization:"Bearer "+token.data.token}},o=t.url+t.routes.publiczipcodes+"/search?postal_code="+o,void axios.get(o,e).then(function(e){$("#__zipcodeid__").val(""),$("#input_address").val("");try{var o;null!=e.data.zipcodes&&(o=e.data.zipcodes[0].public_place+", "+e.data.zipcodes[0].district+", "+e.data.zipcodes[0].state,$("#__zipcodeid__").val(e.data.zipcodes[0].id),$("#input_address").val(o)),getBoxProcess(boxProcess,!1)}catch(e){getBoxProcess(boxProcess,!1)}console.log(e)})),1e3)}),$("#btnSave").on("click",function(){waitingTime=new Date;var e={full_name:$("#input_name").val(),phone:$("#input_phone").val(),address:$("#input_address").val(),zipcode_id:$("#__zipcodeid__").val(),number_house:$("#input_number").val(),campaign_id:campaign.id};$("#btnSave").val("PROCESSANDO...");let o;Swal.fire({title:"",html:"Processando.",timer:3e3,timerProgressBar:!0,didOpen:()=>{Swal.showLoading(),o=setInterval(()=>{const e=Swal.getContent();if(e){const o=e.querySelector("b");o&&(o.textContent=Swal.getTimerLeft())}},100)},willClose:()=>{clearInterval(o)}}).then(e=>{e.dismiss===Swal.DismissReason.timer&&console.log("I was closed by the timer")});try{localStorger.insert("customers",JSON.stringify(e));var t=Api(),i={headers:{Authorization:"Bearer "+token.data.token}};axios.post(t.url+t.routes.totemcustomersstore,e,i).then(function(e){location.href="/printcupom"}).then(e=>{console.log("1 ",e)}).catch(e=>{console.log("2 ",e.response.data[0].message),Swal.fire({position:"top-end",icon:"error",title:"Oops...",text:e.response.data[0].message,showConfirmButton:!1,timer:3500,willClose:()=>{__closeKeyBoard(),window.location.href="/"}}),setTimeout(function(){$("#btnSave").val("ENVIAR"),$("#msn-modal-body").html(""),$("#input_zipcode").val("")},3e3)})}catch(e){console.log(e)}})});
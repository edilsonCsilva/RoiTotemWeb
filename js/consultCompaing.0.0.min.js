var localStorger=new LocalStorger,token=localStorger.getToObject("token"),scanner=null,timesClicksPagers=80,timesContexSetInteval=null,limitTime=100;function readQRCode(){try{setInterval(function(){$("#scan").click(),console.log("read")},400)}catch(e){}}function take_snapshot(){Webcam.snap(function(e){qrCodeDecoder(e)})}function qrCodeDecoder(e){qrcode.decode(e)}function readScanner(e){var o,n=Api();0<e.length&&(console.log(e),beep(100,1,function(){}),e=e.split(":"),o={headers:{Authorization:"Bearer "+token.data.token}},e=n.url+n.routes.totemcampaigns+"/search?hash="+e[1],axios.get(e,o).then(function(e){console.log(e),localStorger.insert("campaign",JSON.stringify(e.data.campaign)),location.href="/selectaccess"}).then(e=>{console.log("1 ",e)}).catch(e=>{Swal.fire({position:"top-end",icon:"error",title:"Oops...",text:"Campanha Não Localizada.",showConfirmButton:!1,timer:2e3,willClose:()=>{window.location.href="/"}})}))}null!=token&&0!=token.data.length||(window.location.href="/"),$(document).ready(function(){function e(){Webcam.snap(function(e){e=e,qrcode.decode(e)})}function o(e){var o,n=Api();clearInterval(scanner),0<e.length&&(beep(100,1,function(){}),e=e.split("?"),o={headers:{Authorization:"Bearer "+token.data.token}},e=n.url+n.routes.totemcampaigns+"/search?"+e[1],axios.get(e,o).then(function(e){clearInterval(scanner),localStorger.insert("campaign",JSON.stringify(e.data.campaign)),location.href="/selectaccess"}).then(e=>{console.log("1 ",e)}).catch(e=>{clearInterval(scanner),Swal.fire({position:"top-end",icon:"error",title:"Oops...",text:"Campanha Não Localizada.",showConfirmButton:!1,timer:2e3,willClose:()=>{window.location.href="/"}})}))}timesContexSetInteval=setInterval(function(){0!=--timesClicksPagers?console.log("click",timesClicksPagers):window.location.href="/"},600),$("body").mousemove(function(){console.log("add "),timesClicksPagers<limitTime&&timesClicksPagers++}),$(window).bind("beforeunload",function(){clearInterval(timesContexSetInteval)}),$(document).ready(function(){setTimeout(function(){Webcam.attach("#webcam"),$("#scan").on("click",function(){e()}),function(){try{scanner=setInterval(function(){$("#scan").click(),console.log("read")},1e3)}catch(e){console.log(e)}}(),qrcode.callback=o},1e3)}),navigator.getMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia,navigator.getMedia({video:!0,audio:!0},function(e){},function(e){console.log("O seguinte erro ocorreu: "+e)}),setTimeout(function(){window.location.href="/"},9e4)}),$(document).ready(function(){setTimeout(function(){Webcam.attach("#webcam"),$("#scan").on("click",function(){take_snapshot()}),readQRCode(),qrcode.callback=readScanner},1e3)});
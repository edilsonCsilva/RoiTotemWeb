<!doctype html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="icon" href="/img/favicon.ico" sizes="16x16" type="image/png">

    <!-- Bootstrap CSS -->
    <link href="/css/bootstrap.min.css" rel="stylesheet" >
    <link href="/css/cores.css" rel="stylesheet" >
    <link href="/css/style-custom.css" rel="stylesheet" >
    <link href="/css/stillkeyboard.0.0.1.min.css" rel="stylesheet" >
    <title>{{title}}</title>    
  </head>
  <body class="theme-roi-base">
    <header class="theme-border-black">
        <!-- Just an image -->
        <nav class="navbar theme-roi-brand-logo-base">
            <div class="container">
            <a class="navbar-brand mx-auto " href="javascript:void(0)" >
                <img src="/img/logoroi.png"  class="brand-logo" alt=""  >
            </a>
            </div>
        </nav>
    </header>



    <div class="container ">
        <!-- Content here -->

        <div class="row " >
            <div class="col-sm-12" style="padding:5px;">
                <div class="text-center" style="padding:5px;">
                        <label><h1 class="colors-write"> SEJA BEM-VINDO :)</h1></label>
                </div>    
            </div>
            <div class="col-sm-12 ">
                <div class="text-center" style="padding:5px;">
                    <label>
                        <h5 class="colors-black"> 
                            TEMOS DESCONTOS ESPECIAIS PARA VOCÃŠ
                        </h5>
                    </label>
                </div>
                    
             </div>
 

             <div class="col-sm-12" style="padding:25px;">
                <div    >
                
                        <div class="theme-center-div"  >
                            <div class="card " style="width:50%;padding:10px; background-color:#bee4f3; border-radius: 20px;">
                                <div class="card-body theme-center-div ">
                                    <div class="row">

                                        <div class="col-sm-12">
                                            <div class="text-center"  >
                                                <label>
                                                    <h5 class="colors-black"> 
                                                        DIGITE SEU TELEFONE
                                                    </h5>
                                                </label>
                                            </div>
                                        </div>
                                        <div class="col-sm-12">
                                            <div class="text-center"  >
                                                <input type="text" stilltype="num" taborder="1"
                                                 class="onfocusClick theme-btn-round theme-input-round theme-border-black" 
                                                 id="input_fone"  value="" placeholder="Celular">
                                            </div>
                                        </div>
                                        <div class="col-sm-12 " style="padding:25px;">
                                            <div class="text-center" style="padding:5px;">
                                                <a href="#" id="btn_process" class="btn btn-blocks
                                                 btn-primary theme-btn-round  theme-btn-round-heigth   " 
                                                 style="vertical-align:middle;">
                                                 <div  class="theme-btn-round-heigth-title ">
                                                     <span class="colors-write">
                                                     <b>ENVIAR</b>
                                                 </span></div>
                                                </a>
                                            </div>
                                        </div>





                                    </div>
                                </div>
                              </div>
                        </div>
                        
    
                </div>
             </div>
            </div>
             


            </div>

          





          
        </div>
        <!-- Content here -->

    </div>



    <div id="containerstillkeyboard" class="still-keyboard-close">
        <!--
         <div class="item-container flex-container " >
             <button class="flex-item onclickAction num-pad" stillValue="1">1</button>
             <button class="flex-item onclickAction num-pad" stillValue="2">2</button>
             <button class="flex-item onclickAction num-pad" stillValue="3">3</button>
             <button class="flex-item onclickAction num-pad" stillValue="4">4</button>
             <button class="flex-item onclickAction num-pad" stillValue="5">5</button>
             <button class="flex-item onclickAction num-pad" stillValue="6">6</button>
             <button class="flex-item onclickAction num-pad" stillValue="7">7</button>
             <button class="flex-item onclickAction num-pad" stillValue="8">8</button>
             <button class="flex-item onclickAction num-pad" stillValue="9">9</button>
             <button class="flex-item onclickAction num-pad" stillValue="0">0</button>
             <button class="flex-item onclickAction num-pad btn-info" stillValue="-3"> Del </button>
             <button class="flex-item onclickAction num-pad btn-info" stillValue="-2"> Return</button>
             <button class="flex-item onclickAction num-pad btn-warning" stillValue="-1">Cancelar</button>
            <button class="flex-item onclickAction num-pad btn-danger" stillValue="100">Enter</button>

         </div>
        -->
    </div>




   
    <!-- Option 1: Bootstrap Bundle with Popper -->
   
    <script src="/js/bootstrap.bundle.min.js" ></script>
    <script src="/js/bootstrap.min.js" ></script>
    <script src="/js/jquery-3.5.1.min.js" ></script>
    <script src="/js/configs.js" ></script>
    <script src="/js/system.js" ></script>
    <script src="/js/localStorger.js" ></script>
    <script src="/js/axios.min.js" ></script>
    <script src="/js/stillkeyboard.0.0.1.min.js" ></script>


    <script>
    var localStorger = new LocalStorger()
    var token=localStorger.getToObject("token")
    var isClick=false;
    if(token==null || token.data.length ==0){
        location.href="/"
    }
  
    $(document).ready(function(){
          $("#btn_process").on("click",function(){
            if(isClick){
                return;
            }

            setTimeout(function(){
                            var configs =  Api();
                            var configRequestsAxios = {
                                headers: {
                                'Authorization': 'Bearer ' +token.data.token
                                }
                            }
                            var apiUrl=configs.url+configs.routes.totemcustomers+"/search?phone="+ $("#input_fone").val()
                            axios.get(apiUrl,configRequestsAxios)
                            .then(function(response){
                                if(response==undefined){s
                                    isClick=false; 
                                }
                                localStorger.insert("customers",JSON.stringify(response.data.customer))
                                var campaign = localStorger.getToObject("campaign")
                                var customer_id =response.data.customer.id
                                var campaign_id = campaign.id
                                axios.post(configs.url+configs.routes.totemcampaignscustomer, 
                                  { campaign_id:campaign_id, customer_id: customer_id },configRequestsAxios)
                                .then(function(response){
                                    location.href="/printcupom"
                                }).then(data => {
                                    console.log("1 ",data)
                                })
                                .catch(error => {
                                        console.log("2 ",error.response.data.error)
                                        setTimeout(function(){
                                                location.href="/"
                                        },2000)
                                });
                                isClick=true;
                            }).then(data => {
                                console.log("1 ",data)
                                setTimeout(function(){
                                                location.href="/"
                                        },2000)
                                 
                            })
                            .catch(error => {
                                    console.log("2 ",error.response.data.error)
                                    setTimeout(function(){
                                                location.href="/"
                                        },2000)
                                    
                            });
                    
                    },1000)
            })

           
          
            
    });
    </script>


    <!-- Option 2: Separate Popper and Bootstrap JS -->
    <!--
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.5.4/dist/umd/popper.min.js" integrity="sha384-q2kxQ16AaE6UbzuKqyBE9/u/KzioAlnx2maXQHiDX9d4/zp8Ok3f+M7DPm+Ib6IU" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/js/bootstrap.min.js" integrity="sha384-pQQkAEnwaBkjpqZ8RU1fF1AKtTcHJwFl3pblpTlHXybJjHpMYo79HY3hIi4NKxyj" crossorigin="anonymous"></script>
    -->
  </body>
</html>